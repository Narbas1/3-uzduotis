cmake_minimum_required(VERSION 3.10)
project(vector VERSION 2.0 LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 14)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# 1) Build your core code as a library
add_library(vector_lib
    vector/source/functions.cpp
    vector/source/student.cpp
)
target_include_directories(vector_lib PUBLIC
    ${CMAKE_SOURCE_DIR}/vector/source
)

# 2) Build your main app
add_executable(v
    vector/source/main.cpp
)
target_link_libraries(v PRIVATE vector_lib)

# 3) Build the tests executable
add_executable(tests
    tests/tests.cpp
)
# Tell the compiler where to find your headers and doctest.h
target_include_directories(tests PRIVATE
    ${CMAKE_SOURCE_DIR}/vector/source
    ${CMAKE_SOURCE_DIR}/third_party
)
# Link in your library so tests can call into it
target_link_libraries(tests PRIVATE vector_lib)

# 4) (Optional) register with CTest
enable_testing()
add_test(NAME RunAllTests COMMAND tests)
